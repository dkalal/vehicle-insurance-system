# Generated by Django 5.0.1 on 2025-12-29 14:51

import django.core.validators
import django.db.models.deletion
import simple_history.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('tenants', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Customer',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('customer_type', models.CharField(choices=[('individual', 'Individual'), ('company', 'Company')], db_index=True, help_text='Type of customer: individual or company', max_length=20)),
                ('first_name', models.CharField(blank=True, help_text='First name (for individuals)', max_length=100)),
                ('last_name', models.CharField(blank=True, help_text='Last name (for individuals)', max_length=100)),
                ('id_number', models.CharField(blank=True, db_index=True, help_text='National ID or Passport number (for individuals)', max_length=50)),
                ('date_of_birth', models.DateField(blank=True, help_text='Date of birth (for individuals)', null=True)),
                ('company_name', models.CharField(blank=True, db_index=True, help_text='Company name (for companies)', max_length=255)),
                ('registration_number', models.CharField(blank=True, db_index=True, help_text='Business registration number (for companies)', max_length=100)),
                ('tax_id', models.CharField(blank=True, help_text='Tax identification number (for companies)', max_length=50)),
                ('email', models.EmailField(help_text='Primary email address', max_length=254)),
                ('phone', models.CharField(help_text='Primary phone number', max_length=20, validators=[django.core.validators.RegexValidator(message="Phone number must be in format: '+999999999'. Up to 15 digits allowed.", regex='^\\+?1?\\d{9,15}$')])),
                ('address', models.TextField(blank=True, help_text='Full address')),
                ('city', models.CharField(blank=True, max_length=100)),
                ('region', models.CharField(blank=True, max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the customer')),
                ('created_by', models.ForeignKey(blank=True, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created_set', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(help_text='Insurance company this record belongs to', on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_set', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated_set', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Customer',
                'verbose_name_plural': 'Customers',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalCustomer',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, db_index=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('customer_type', models.CharField(choices=[('individual', 'Individual'), ('company', 'Company')], db_index=True, help_text='Type of customer: individual or company', max_length=20)),
                ('first_name', models.CharField(blank=True, help_text='First name (for individuals)', max_length=100)),
                ('last_name', models.CharField(blank=True, help_text='Last name (for individuals)', max_length=100)),
                ('id_number', models.CharField(blank=True, db_index=True, help_text='National ID or Passport number (for individuals)', max_length=50)),
                ('date_of_birth', models.DateField(blank=True, help_text='Date of birth (for individuals)', null=True)),
                ('company_name', models.CharField(blank=True, db_index=True, help_text='Company name (for companies)', max_length=255)),
                ('registration_number', models.CharField(blank=True, db_index=True, help_text='Business registration number (for companies)', max_length=100)),
                ('tax_id', models.CharField(blank=True, help_text='Tax identification number (for companies)', max_length=50)),
                ('email', models.EmailField(help_text='Primary email address', max_length=254)),
                ('phone', models.CharField(help_text='Primary phone number', max_length=20, validators=[django.core.validators.RegexValidator(message="Phone number must be in format: '+999999999'. Up to 15 digits allowed.", regex='^\\+?1?\\d{9,15}$')])),
                ('address', models.TextField(blank=True, help_text='Full address')),
                ('city', models.CharField(blank=True, max_length=100)),
                ('region', models.CharField(blank=True, max_length=100)),
                ('postal_code', models.CharField(blank=True, max_length=20)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the customer')),
                ('history_id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(blank=True, db_constraint=False, help_text='Insurance company this record belongs to', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Customer',
                'verbose_name_plural': 'historical Customers',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalVehicle',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, db_index=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('vehicle_type', models.CharField(choices=[('motorcycle', 'Motorcycle'), ('bajaji', 'Bajaji (Three-Wheeler)'), ('car', 'Car')], db_index=True, help_text='Type of vehicle', max_length=20)),
                ('registration_number', models.CharField(db_index=True, help_text='Vehicle registration/license plate number', max_length=50)),
                ('make', models.CharField(help_text='Vehicle manufacturer (e.g., Toyota, Honda)', max_length=100)),
                ('model', models.CharField(help_text='Vehicle model', max_length=100)),
                ('year', models.PositiveIntegerField(help_text='Year of manufacture')),
                ('color', models.CharField(blank=True, help_text='Vehicle color', max_length=50)),
                ('chassis_number', models.CharField(blank=True, db_index=True, help_text='Vehicle chassis number (VIN)', max_length=100)),
                ('engine_number', models.CharField(blank=True, help_text='Engine number', max_length=100)),
                ('seating_capacity', models.PositiveIntegerField(blank=True, help_text='Number of seats', null=True)),
                ('engine_capacity', models.DecimalField(blank=True, decimal_places=2, help_text='Engine capacity in CC (e.g., 1500.00)', max_digits=6, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the vehicle')),
                ('history_id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('owner', models.ForeignKey(blank=True, db_constraint=False, help_text='Current owner of this vehicle', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.customer')),
                ('tenant', models.ForeignKey(blank=True, db_constraint=False, help_text='Insurance company this record belongs to', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical Vehicle',
                'verbose_name_plural': 'historical Vehicles',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='Policy',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('policy_number', models.CharField(db_index=True, help_text='Unique policy number', max_length=100, unique=True)),
                ('start_date', models.DateField(help_text='Policy start date')),
                ('end_date', models.DateField(help_text='Policy end date')),
                ('premium_amount', models.DecimalField(decimal_places=2, help_text='Premium amount for this policy', max_digits=12)),
                ('coverage_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum coverage/insured value', max_digits=12, null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_payment', 'Pending Payment'), ('active', 'Active'), ('expired', 'Expired'), ('cancelled', 'Cancelled')], db_index=True, default='draft', help_text='Current status of the policy', max_length=20)),
                ('policy_type', models.CharField(blank=True, help_text='Type of policy (e.g., Comprehensive, Third Party)', max_length=100)),
                ('terms_and_conditions', models.TextField(blank=True, help_text='Policy terms and conditions')),
                ('notes', models.TextField(blank=True, help_text='Additional notes')),
                ('activated_at', models.DateTimeField(blank=True, help_text='When policy was activated (after payment)', null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, help_text='When policy was cancelled', null=True)),
                ('cancellation_reason', models.TextField(blank=True, help_text='Reason for cancellation')),
                ('created_by', models.ForeignKey(blank=True, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created_set', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(help_text='Insurance company this record belongs to', on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_set', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated_set', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Policy',
                'verbose_name_plural': 'Policies',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('amount', models.DecimalField(decimal_places=2, help_text='Payment amount', max_digits=12)),
                ('payment_date', models.DateTimeField(help_text='When payment was made')),
                ('payment_method', models.CharField(choices=[('cash', 'Cash'), ('bank_transfer', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('check', 'Check'), ('card', 'Credit/Debit Card')], help_text='Method of payment', max_length=20)),
                ('reference_number', models.CharField(db_index=True, help_text='Payment reference/transaction number', max_length=100)),
                ('payer_name', models.CharField(blank=True, help_text='Name of person who made payment (if different from policy holder)', max_length=255)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the payment')),
                ('is_verified', models.BooleanField(db_index=True, default=False, help_text='Whether payment has been verified')),
                ('verified_at', models.DateTimeField(blank=True, help_text='When payment was verified', null=True)),
                ('created_by', models.ForeignKey(blank=True, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created_set', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(help_text='Insurance company this record belongs to', on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_set', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated_set', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, help_text='User who verified the payment', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_payments', to=settings.AUTH_USER_MODEL)),
                ('policy', models.ForeignKey(help_text='Policy this payment is for', on_delete=django.db.models.deletion.PROTECT, related_name='payments', to='core.policy')),
            ],
            options={
                'verbose_name': 'Payment',
                'verbose_name_plural': 'Payments',
                'ordering': ['-payment_date'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalPayment',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, db_index=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('amount', models.DecimalField(decimal_places=2, help_text='Payment amount', max_digits=12)),
                ('payment_date', models.DateTimeField(help_text='When payment was made')),
                ('payment_method', models.CharField(choices=[('cash', 'Cash'), ('bank_transfer', 'Bank Transfer'), ('mobile_money', 'Mobile Money'), ('check', 'Check'), ('card', 'Credit/Debit Card')], help_text='Method of payment', max_length=20)),
                ('reference_number', models.CharField(db_index=True, help_text='Payment reference/transaction number', max_length=100)),
                ('payer_name', models.CharField(blank=True, help_text='Name of person who made payment (if different from policy holder)', max_length=255)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the payment')),
                ('is_verified', models.BooleanField(db_index=True, default=False, help_text='Whether payment has been verified')),
                ('verified_at', models.DateTimeField(blank=True, help_text='When payment was verified', null=True)),
                ('history_id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(blank=True, db_constraint=False, help_text='Insurance company this record belongs to', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who verified the payment', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('policy', models.ForeignKey(blank=True, db_constraint=False, help_text='Policy this payment is for', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.policy')),
            ],
            options={
                'verbose_name': 'historical Payment',
                'verbose_name_plural': 'historical Payments',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='Vehicle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('vehicle_type', models.CharField(choices=[('motorcycle', 'Motorcycle'), ('bajaji', 'Bajaji (Three-Wheeler)'), ('car', 'Car')], db_index=True, help_text='Type of vehicle', max_length=20)),
                ('registration_number', models.CharField(db_index=True, help_text='Vehicle registration/license plate number', max_length=50)),
                ('make', models.CharField(help_text='Vehicle manufacturer (e.g., Toyota, Honda)', max_length=100)),
                ('model', models.CharField(help_text='Vehicle model', max_length=100)),
                ('year', models.PositiveIntegerField(help_text='Year of manufacture')),
                ('color', models.CharField(blank=True, help_text='Vehicle color', max_length=50)),
                ('chassis_number', models.CharField(blank=True, db_index=True, help_text='Vehicle chassis number (VIN)', max_length=100)),
                ('engine_number', models.CharField(blank=True, help_text='Engine number', max_length=100)),
                ('seating_capacity', models.PositiveIntegerField(blank=True, help_text='Number of seats', null=True)),
                ('engine_capacity', models.DecimalField(blank=True, decimal_places=2, help_text='Engine capacity in CC (e.g., 1500.00)', max_digits=6, null=True)),
                ('notes', models.TextField(blank=True, help_text='Additional notes about the vehicle')),
                ('created_by', models.ForeignKey(blank=True, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_created_set', to=settings.AUTH_USER_MODEL)),
                ('owner', models.ForeignKey(help_text='Current owner of this vehicle', on_delete=django.db.models.deletion.PROTECT, related_name='vehicles', to='core.customer')),
                ('tenant', models.ForeignKey(help_text='Insurance company this record belongs to', on_delete=django.db.models.deletion.PROTECT, related_name='%(class)s_set', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='%(class)s_updated_set', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Vehicle',
                'verbose_name_plural': 'Vehicles',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddField(
            model_name='policy',
            name='vehicle',
            field=models.ForeignKey(help_text='Vehicle covered by this policy', on_delete=django.db.models.deletion.PROTECT, related_name='policies', to='core.vehicle'),
        ),
        migrations.CreateModel(
            name='HistoricalPolicy',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, db_index=True, editable=False)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('deleted_at', models.DateTimeField(blank=True, db_index=True, help_text='Timestamp when record was soft-deleted', null=True)),
                ('policy_number', models.CharField(db_index=True, help_text='Unique policy number', max_length=100)),
                ('start_date', models.DateField(help_text='Policy start date')),
                ('end_date', models.DateField(help_text='Policy end date')),
                ('premium_amount', models.DecimalField(decimal_places=2, help_text='Premium amount for this policy', max_digits=12)),
                ('coverage_amount', models.DecimalField(blank=True, decimal_places=2, help_text='Maximum coverage/insured value', max_digits=12, null=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('pending_payment', 'Pending Payment'), ('active', 'Active'), ('expired', 'Expired'), ('cancelled', 'Cancelled')], db_index=True, default='draft', help_text='Current status of the policy', max_length=20)),
                ('policy_type', models.CharField(blank=True, help_text='Type of policy (e.g., Comprehensive, Third Party)', max_length=100)),
                ('terms_and_conditions', models.TextField(blank=True, help_text='Policy terms and conditions')),
                ('notes', models.TextField(blank=True, help_text='Additional notes')),
                ('activated_at', models.DateTimeField(blank=True, help_text='When policy was activated (after payment)', null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, help_text='When policy was cancelled', null=True)),
                ('cancellation_reason', models.TextField(blank=True, help_text='Reason for cancellation')),
                ('history_id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who created this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('tenant', models.ForeignKey(blank=True, db_constraint=False, help_text='Insurance company this record belongs to', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='tenants.tenant')),
                ('updated_by', models.ForeignKey(blank=True, db_constraint=False, help_text='User who last updated this record', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('vehicle', models.ForeignKey(blank=True, db_constraint=False, help_text='Vehicle covered by this policy', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='core.vehicle')),
            ],
            options={
                'verbose_name': 'historical Policy',
                'verbose_name_plural': 'historical Policies',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'customer_type'], name='core_custom_tenant__41588e_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'email'], name='core_custom_tenant__ed89f5_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'id_number'], name='core_custom_tenant__c0935d_idx'),
        ),
        migrations.AddIndex(
            model_name='customer',
            index=models.Index(fields=['tenant', 'registration_number'], name='core_custom_tenant__58ef2f_idx'),
        ),
        migrations.AddConstraint(
            model_name='customer',
            constraint=models.CheckConstraint(check=models.Q(models.Q(('customer_type', 'individual'), _negated=True), models.Q(('first_name__isnull', False), models.Q(('first_name', ''), _negated=True)), _connector='OR'), name='individual_has_first_name'),
        ),
        migrations.AddConstraint(
            model_name='customer',
            constraint=models.CheckConstraint(check=models.Q(models.Q(('customer_type', 'company'), _negated=True), models.Q(('company_name__isnull', False), models.Q(('company_name', ''), _negated=True)), _connector='OR'), name='company_has_name'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['tenant', 'policy'], name='core_paymen_tenant__bed6ed_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['tenant', 'payment_date'], name='core_paymen_tenant__391172_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['tenant', 'is_verified'], name='core_paymen_tenant__b11f58_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['reference_number'], name='core_paymen_referen_64767d_idx'),
        ),
        migrations.AddConstraint(
            model_name='payment',
            constraint=models.CheckConstraint(check=models.Q(('amount__gt', 0)), name='payment_amount_positive'),
        ),
        migrations.AddIndex(
            model_name='vehicle',
            index=models.Index(fields=['tenant', 'registration_number'], name='core_vehicl_tenant__14a3b6_idx'),
        ),
        migrations.AddIndex(
            model_name='vehicle',
            index=models.Index(fields=['tenant', 'owner'], name='core_vehicl_tenant__cb8349_idx'),
        ),
        migrations.AddIndex(
            model_name='vehicle',
            index=models.Index(fields=['tenant', 'vehicle_type'], name='core_vehicl_tenant__848017_idx'),
        ),
        migrations.AddIndex(
            model_name='vehicle',
            index=models.Index(fields=['chassis_number'], name='core_vehicl_chassis_670ff9_idx'),
        ),
        migrations.AddConstraint(
            model_name='vehicle',
            constraint=models.UniqueConstraint(condition=models.Q(('deleted_at__isnull', True)), fields=('tenant', 'registration_number'), name='unique_registration_per_tenant'),
        ),
        migrations.AddIndex(
            model_name='policy',
            index=models.Index(fields=['tenant', 'status'], name='core_policy_tenant__512d8c_idx'),
        ),
        migrations.AddIndex(
            model_name='policy',
            index=models.Index(fields=['tenant', 'vehicle'], name='core_policy_tenant__ef3cba_idx'),
        ),
        migrations.AddIndex(
            model_name='policy',
            index=models.Index(fields=['tenant', 'start_date'], name='core_policy_tenant__3fa035_idx'),
        ),
        migrations.AddIndex(
            model_name='policy',
            index=models.Index(fields=['tenant', 'end_date'], name='core_policy_tenant__2dc4e2_idx'),
        ),
        migrations.AddIndex(
            model_name='policy',
            index=models.Index(fields=['policy_number'], name='core_policy_policy__3fe071_idx'),
        ),
        migrations.AddConstraint(
            model_name='policy',
            constraint=models.CheckConstraint(check=models.Q(('end_date__gt', models.F('start_date'))), name='end_date_after_start_date'),
        ),
        migrations.AddConstraint(
            model_name='policy',
            constraint=models.CheckConstraint(check=models.Q(('premium_amount__gt', 0)), name='premium_must_be_positive'),
        ),
    ]
